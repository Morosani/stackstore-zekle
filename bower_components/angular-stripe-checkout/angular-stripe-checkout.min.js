(function(){"use strict";var e=angular.extend;var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label"};angular.module("stripe.checkout",[]).directive("stripeCheckout",a).provider("StripeCheckout",r);a.$inject=["$parse","StripeCheckout"];function a(e,t){return{link:a};function a(n,a,o){var i,c=e(o.stripeCheckout)(n);t.load().then(function(){i=t.configure(r(a))});a.on("click",function(){if(i)i.open().then(function(e){c.apply(null,e)})})}function r(e){var t,a,r={};for(t in n){a=e.attr(n[t]);if(typeof a!=="undefined")r[t]=a}r.bitcoin=e.attr("data-bitcoin")=="true";r.allowRememberMe=e.attr("data-allow-remember-me")=="true";return r}}function r(){var t={};this.defaults=function(n){e(t,n)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(e,n){return new o(e,n,t)};this.$get.$inject=["$document","$q"]}function o(t,n,a){var r={},o;this.configure=function(t){return new i(n,e({},a,r,t))};this.load=function(){if(!o)o=c(t,n);return o};this.defaults=function(t){e(r,t)}}function i(t,n){var a,r;var o=StripeCheckout.configure(e({},n,{token:function(e,t){if(n.token)n.token(e,t);r=true;a.resolve([e,t])},closed:function(){if(n.closed)n.closed();if(!r)a.reject()}}));this.open=function(e){a=t.defer();r=false;o.open(e);return a.promise}}function c(e,n){var a=n.defer();var r=e[0],o=r.createElement("script");o.src=t;o.onload=function(){a.resolve()};o.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")a.resolve()};o.onerror=function(){a.reject(new Error("Unable to load checkout.js"))};var i=r.getElementsByTagName("head")[0];i.appendChild(o);return a.promise}})();